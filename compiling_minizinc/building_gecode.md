# Building the "Gecode" solver

## About "Gecode"

**"Gecode"** is the "generic constraint development environment".

> Gecode is an open source C++ toolkit for developing constraint-based systems and applications.  
> Gecode provides a constraint solver with state-of-the-art performance while being modular and extensible.

So Gecode provides C++ classes to model and solve constraint optimization problems in C++ - which
is less convenient for interactive work than having a dedicated "interpreted" high-level language 
due to the (frankly 20th century) "program/edit-compile-debug" cycle.

It can process the [FlatZinc language files](https://www.gecode.org/flatzinc.html) generated by the MiniZinc compiler.
   
> We provide a parser that reads a FlatZinc model from a file, and returns a Gecode Space object that represents
> the model. We also provide a simple front-end, an executable program that reads a FlatZinc model and prints
> the solution (if any) on the standard output.    

The invocation to make the MiniZinc compiler generate FlatZinc output without
passing it to Gecode or another solver is apparently `minizinc -c --solver org.minizinc.mzn-fzn`.

See ["Chapter 2.8: FlatZinc and Flattening"](https://www.minizinc.org/doc-2.5.5/en/flattening.html) 
in the "MiniZinc Handbook" for more on this.

The **"Gist"** tool (no relation to a github "gist") is the "Gecode interactive search tool".
Might be the tool that gets invoked when you select "Profile search" in the MiniZinc IDE.

From the Gecode manual, chapter 2.4:

> When developing a constraint model, the usual outcome of a first modeling attempt is that
> the model has no solutions or searching for a solution takes too much time to be feasible.
> What one really needs in these situations is additional insight as to: why does the model
> have no solutions, why is propagation not sufficient, or why is the branching not appropriate
> for the problem?
>
> Gecode offers Gist as a graphical and interactive search tool with which you can explore
> any part of the search tree of a model step by step or automatically and inspect the nodes of
> the search tree.

- Homepage: https://www.gecode.org/
- Repository: https://github.com/Gecode/gecode/
- Documentation: https://www.gecode.org/documentation.html
- Reference documentation: https://www.gecode.org/doc-latest/reference/
- Humdinger PDF (578 pages) ["Modeling and programming with Gecode"](http://www.gecode.org/doc-latest/MPG.pdf ) by Christian Schulte, Guido Tack, Mikael Z. Lagerkvist: 

## Compile Gecode before the MiniZinc compiler ("libminizinc")

The compilation process of the MiniZinc compiler needs some files of Gecode, so you have to build 
Gecode before libminizinc (hazy on the details for now).

## Getting _gecode_

The github repository is here: https://github.com/Gecode/gecode/

Perform either of the following on the command line:

```
git clone git@github.com:Gecode/gecode.git
```

which may ask for your github account password, or

```
git clone https://github.com/Gecode/gecode.git
```

which needs no password.

This will create a local directory `gecode`

```
$ tree -L 1 -F gecode/

gecode
├── driver/
├── driver.hh
├── flatzinc/
├── flatzinc.hh
├── float/
├── float.hh*
├── gist/
├── gist.hh
├── int/
├── int.hh*
├── iter/
├── iter.hh
├── kernel/
├── kernel.hh*
├── minimodel/
├── minimodel.hh*
├── search/
├── search.hh*
├── set/
├── set.hh*
├── support/
├── support.hh
└── third-party/
```

Then

```
$ cd gecode/
```

List git repository branches:

```
$ git branch -a 
* master
  remotes/origin/HEAD -> origin/master
  remotes/origin/develop
  remotes/origin/master
  remotes/origin/release/6.3.0
```

There is the "master" branch and the "develop" branch, the latter actually existing on the remote repository. 

As indicated by the `*`, we are currently on the "master" branch:

```
$ git branch --show-current
master
```

Check the log of the currently check-out branch:

```
$ git log
commit 027c57889d66dd26ad8e1a419c2cda22ab0cf305 (HEAD -> master, origin/master, origin/HEAD)
Author: Christian Schulte <cschulte@kth.se>
Date:   Fri Apr 12 14:14:40 2019 +0200

    Update LICENSE
    
    Formatting.
```

You actually want to switch to the "develop" branch to use the latest bugfixes. Otherwise you will make your life hard
(i.e. errors may appear for unreasonable reasons when you run MiniZinc.)

```
$ git checkout develop
```

TO BE CONTINUED AFTER COFFEE


